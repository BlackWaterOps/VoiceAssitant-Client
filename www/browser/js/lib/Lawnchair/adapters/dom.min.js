Lawnchair.adapter("dom",function(){var e=window.localStorage,t=function(t){return{key:t+"._index_",all:function(){var t=e.getItem(this.key);t&&(t=JSON.parse(t));t===null&&e.setItem(this.key,JSON.stringify([]));return JSON.parse(e.getItem(this.key))},add:function(t){var n=this.all();n.push(t);e.setItem(this.key,JSON.stringify(n))},del:function(t){var n=this.all(),r=[];for(var i=0,s=n.length;i<s;i++)n[i]!=t&&r.push(n[i]);e.setItem(this.key,JSON.stringify(r))},find:function(e){var t=this.all();for(var n=0,r=t.length;n<r;n++)if(e===t[n])return n;return!1}}};return{valid:function(){return!!e&&function(){var t=!0,n=Math.random();try{e.setItem(n,n)}catch(r){t=!1}e.removeItem(n);return t}()},init:function(e,n){this.indexer=t(this.name);n&&this.fn(this.name,n).call(this,this)},save:function(t,n){var r=t.key?this.name+"."+t.key:this.name+"."+this.uuid();this.indexer.find(r)===!1&&this.indexer.add(r);delete t.key;e.setItem(r,JSON.stringify(t));t.key=r.slice(this.name.length+1);n&&this.lambda(n).call(this,t);return this},batch:function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++)this.save(e[r],function(e){n.push(e)});t&&this.lambda(t).call(this,n);return this},keys:function(e){if(e){var t=this.name,n=this.indexer.all().map(function(e){return e.replace(t+".","")});this.fn("keys",e).call(this,n)}return this},get:function(t,n){if(this.isArray(t)){var r=[];for(var i=0,s=t.length;i<s;i++){var o=this.name+"."+t[i],u=e.getItem(o);if(u){u=JSON.parse(u);u.key=t[i];r.push(u)}}n&&this.lambda(n).call(this,r)}else{var o=this.name+"."+t,u=e.getItem(o);if(u){u=JSON.parse(u);u.key=t}n&&this.lambda(n).call(this,u)}return this},exists:function(e,t){var n=this.indexer.find(this.name+"."+e)===!1?!1:!0;this.lambda(t).call(this,n);return this},all:function(t){var n=this.indexer.all(),r=[],i,s;for(var o=0,u=n.length;o<u;o++){s=n[o];i=JSON.parse(e.getItem(s));i.key=s.replace(this.name+".","");r.push(i)}t&&this.fn(this.name,t).call(this,r);return this},remove:function(t,n){var r=this.name+"."+(t.key?t.key:t);this.indexer.del(r);e.removeItem(r);n&&this.lambda(n).call(this);return this},nuke:function(e){this.all(function(t){for(var n=0,r=t.length;n<r;n++)this.remove(t[n]);e&&this.lambda(e).call(this)});return this}}}());