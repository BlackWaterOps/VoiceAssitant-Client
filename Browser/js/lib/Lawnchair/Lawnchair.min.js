var Lawnchair=function(e,t){if(!(this instanceof Lawnchair))return new Lawnchair(e,t);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&arguments.length>0))throw"Incorrect # of ctor args!";t=typeof arguments[0]=="function"?arguments[0]:arguments[1];e=typeof arguments[0]=="function"?{}:arguments[0];if(typeof t!="function")throw"No callback was provided";this.record=e.record||"record";this.name=e.name||"records";var n;if(e.adapter){for(var r=0,i=Lawnchair.adapters.length;r<i;r++)if(Lawnchair.adapters[r].adapter===e.adapter){n=Lawnchair.adapters[r].valid()?Lawnchair.adapters[r]:undefined;break}}else for(var r=0,i=Lawnchair.adapters.length;r<i;r++){n=Lawnchair.adapters[r].valid()?Lawnchair.adapters[r]:undefined;if(n)break}if(!n)throw"No valid adapter.";for(var s in n)this[s]=n[s];for(var r=0,i=Lawnchair.plugins.length;r<i;r++)Lawnchair.plugins[r].call(this);this.init(e,t)};Lawnchair.adapters=[];Lawnchair.adapter=function(e,t){t.adapter=e;var n="adapter valid init keys save batch get exists all remove nuke".split(" "),r=this.prototype.indexOf;for(var i in t)if(r(n,i)===-1)throw"Invalid adapter! Nonstandard method: "+i;Lawnchair.adapters.splice(0,0,t)};Lawnchair.plugins=[];Lawnchair.plugin=function(e){for(var t in e)t==="init"?Lawnchair.plugins.push(e[t]):this.prototype[t]=e[t]};Lawnchair.prototype={isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},indexOf:function(e,t,n,r){if(e.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},lambda:function(e){return this.fn(this.record,e)},fn:function(e,t){return typeof t=="string"?new Function(e,t):t},uuid:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},each:function(e){var t=this.lambda(e);if(this.__results)for(var n=0,r=this.__results.length;n<r;n++)t.call(this,this.__results[n],n);else this.all(function(e){for(var n=0,r=e.length;n<r;n++)t.call(this,e[n],n)});return this}};